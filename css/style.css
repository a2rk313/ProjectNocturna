/* css/style.css - FINAL VERSION WITH REORGANIZED PANELS */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

:root {
    /* Cosmic Color Palette */
    --cosmic-dark: #0f172a;
    --cosmic-darker: #0a0f1c;
    --cosmic-primary: #60a5fa;
    --cosmic-secondary: #a78bfa;
    --cosmic-accent: #f59e0b;
    --cosmic-success: #10b981;
    --cosmic-danger: #ef4444;
    --cosmic-warning: #f59e0b;
    --cosmic-info: #06b6d4;
    
    /* Research Grade Colors */
    --cosmic-purple: #9d4edd;
    --cosmic-teal: #06d6a0;
    --cosmic-amber: #ff9e00;
    --cosmic-indigo: #3a0ca3;
    --cosmic-rose: #f72585;
    
    /* Glass Morphism Variables */
    --glass-bg: rgba(255, 255, 255, 0.08);
    --glass-border: rgba(255, 255, 255, 0.12);
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    --glass-blur: blur(20px);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, var(--cosmic-darker) 0%, var(--cosmic-dark) 100%);
    min-height: 100vh;
    color: white;
    overflow-x: hidden;
    font-size: 0.9rem;
}

/* Animated Cosmic Background */
.stars, .twinkling, .clouds {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    width: 100%; height: 100%; display: block; z-index: -3;
}
.stars { background: #000 url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="0.5" fill="white"/><circle cx="80" cy="40" r="0.3" fill="white"/><circle cx="40" cy="80" r="0.7" fill="white"/><circle cx="60" cy="60" r="0.4" fill="white"/><circle cx="10" cy="90" r="0.6" fill="white"/></svg>') repeat top center; }
.twinkling { background: transparent url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="30" cy="30" r="0.8" fill="white" opacity="0.5"/><circle cx="70" cy="20" r="0.5" fill="white" opacity="0.3"/><circle cx="20" cy="70" r="1" fill="white" opacity="0.7"/></svg>') repeat top center; animation: move-twink-back 200s linear infinite; }
.clouds { background: transparent url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M10,50 Q30,30 50,50 T90,50" stroke="rgba(255,255,255,0.1)" fill="none" stroke-width="2"/></svg>') repeat top center; opacity: 0.3; animation: move-clouds-back 150s linear infinite; }
@keyframes move-twink-back { from { background-position: 0 0; } to { background-position: -10000px 5000px; } }
@keyframes move-clouds-back { from { background-position: 0 0; } to { background-position: 10000px 0; } }

/* Logo & Loading */
.navbar-logo { height: 28px; width: auto; filter: drop-shadow(0 0 8px rgba(96, 165, 250, 0.6)); transition: all 0.3s ease; }
.navbar-logo:hover { transform: scale(1.05); filter: drop-shadow(0 0 12px rgba(96, 165, 250, 0.8)); }
.loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.95); z-index: 9999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
.loading-content { background: var(--glass-bg); padding: 40px; border-radius: 24px; backdrop-filter: var(--glass-blur); border: 1px solid var(--glass-border); box-shadow: var(--glass-shadow); max-width: 500px; width: 90%; }
.loading-logo { max-width: 120px; height: auto; animation: float 6s ease-in-out infinite; }
@keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }

/* Navbar */
.cosmic-navbar { background: var(--glass-bg) !important; backdrop-filter: var(--glass-blur); border-bottom: 1px solid var(--glass-border); padding: 8px 0; }
.gradient-text { background: linear-gradient(135deg, var(--cosmic-primary), var(--cosmic-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 600; }
.mode-badge { font-size: 0.65em; padding: 3px 6px; border-radius: 12px; font-weight: 500; }
.citizen-mode-active .mode-badge { background: linear-gradient(135deg, var(--cosmic-success), #059669); }
.scientific-mode-active .mode-badge { background: linear-gradient(135deg, var(--cosmic-warning), #d97706); }
.btn-outline-cosmic { border: 1px solid var(--glass-border); color: rgba(255, 255, 255, 0.8); background: rgba(255, 255, 255, 0.05); border-radius: 8px !important; padding: 6px 12px !important; font-size: 0.8rem; }
.btn-outline-cosmic:hover { background: rgba(255, 255, 255, 0.1); border-color: var(--cosmic-primary); color: white; }

/* RESEARCH-GRADE BUTTONS */
.btn-cosmic-purple {
    background: linear-gradient(135deg, var(--cosmic-purple), #7b2cbf) !important;
    box-shadow: 0 4px 12px rgba(157, 78, 221, 0.4) !important;
    border: none !important;
    color: white !important;
}

.btn-cosmic-teal {
    background: linear-gradient(135deg, var(--cosmic-teal), #04a777) !important;
    box-shadow: 0 4px 12px rgba(6, 214, 160, 0.4) !important;
    border: none !important;
    color: white !important;
}

.btn-cosmic-amber {
    background: linear-gradient(135deg, var(--cosmic-amber), #e68a00) !important;
    box-shadow: 0 4px 12px rgba(255, 158, 0, 0.4) !important;
    border: none !important;
    color: white !important;
}

.btn-cosmic-indigo {
    background: linear-gradient(135deg, var(--cosmic-indigo), #240773) !important;
    box-shadow: 0 4px 12px rgba(58, 12, 163, 0.4) !important;
    border: none !important;
    color: white !important;
}

.btn-cosmic-rose {
    background: linear-gradient(135deg, var(--cosmic-rose), #d9047a) !important;
    box-shadow: 0 4px 12px rgba(247, 37, 133, 0.4) !important;
    border: none !important;
    color: white !important;
}

/* Standard Buttons */
.btn-cosmic-primary { background: linear-gradient(135deg, var(--cosmic-primary), #3b82f6) !important; box-shadow: 0 4px 12px rgba(96, 165, 250, 0.3) !important; border: none !important; }
.btn-cosmic-info { background: linear-gradient(135deg, var(--cosmic-info), #0891b2) !important; box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3) !important; border: none !important; }
.btn-cosmic-warning { background: linear-gradient(135deg, var(--cosmic-warning), #d97706) !important; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3) !important; border: none !important; }
.btn-cosmic-danger { background: linear-gradient(135deg, var(--cosmic-danger), #dc2626) !important; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3) !important; border: none !important; }
.btn-cosmic-success { background: linear-gradient(135deg, var(--cosmic-success), #059669) !important; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4) !important; border: none !important; }

/* Panels */
.cosmic-panel { 
    background: var(--glass-bg); 
    backdrop-filter: var(--glass-blur); 
    border: 1px solid var(--glass-border); 
    box-shadow: var(--glass-shadow); 
    border-radius: 12px; 
    overflow: hidden; 
    transition: all 0.3s ease;
}
.panel-header { 
    padding: 10px 15px; 
    border-bottom: 1px solid var(--glass-border); 
    cursor: pointer; 
    position: relative; 
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.panel-header h6 { margin: 0; color: rgba(255, 255, 255, 0.9); font-weight: 600; font-size: 0.85rem; }
.panel-divider { height: 1px; background: linear-gradient(90deg, transparent, var(--glass-border), transparent); margin: 0 15px; }

/* Control Panel (Left Side) */
.control-panel { 
    position: fixed; 
    top: 70px; 
    left: 15px; 
    z-index: 1000; 
    width: 240px;
}

/* NEW: Visualization Panel (Top Right) */
.data-layers-panel {
    position: fixed;
    top: 70px;
    right: 15px;
    z-index: 1000;
    width: 280px;
    max-height: 80vh;
    overflow-y: auto;
}

/* Base Map Selector Styles */
.basemap-selector .btn {
    padding: 8px 12px !important;
    text-align: left;
    border-radius: 6px !important;
    margin-bottom: 5px;
    transition: all 0.3s ease;
    width: 100%;
}

.basemap-selector .btn:hover {
    transform: translateX(3px);
    background: rgba(255, 255, 255, 0.1) !important;
}

.basemap-selector .btn.active {
    background: linear-gradient(135deg, var(--cosmic-primary), #3b82f6) !important;
    border-color: var(--cosmic-primary) !important;
    color: white !important;
}

/* Visualization Controls */
.visualization-controls {
    padding: 10px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    margin-bottom: 15px;
}

.cosmic-check {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    padding: 8px 10px;
    border-radius: 6px;
    transition: background 0.3s ease;
}

.cosmic-check:hover {
    background: rgba(255, 255, 255, 0.05);
}

.cosmic-check .form-check-input {
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid var(--glass-border);
    margin-right: 10px;
    width: 18px;
    height: 18px;
}

.cosmic-check .form-check-input:checked {
    background-color: var(--cosmic-primary);
    border-color: var(--cosmic-primary);
}

.cosmic-check .form-check-label {
    font-size: 0.85rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-grow: 1;
}

/* Layer Settings */
#layerSettings {
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
}

/* Button Spacing */
.control-panel .btn { 
    border-radius: 8px !important; 
    padding: 10px 12px !important; 
    text-align: left; 
    width: 100%; 
    border: none; 
    color: white; 
    margin-bottom: 8px; 
    font-size: 0.8rem;
    transition: all 0.3s ease;
}
.control-panel .btn:hover { 
    transform: translateY(-2px); 
    filter: brightness(1.1); 
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4) !important; 
}

/* Analysis Panel */
.analysis-panel { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2000; width: 90%; max-width: 700px; max-height: 80vh; overflow-y: auto; display: none; }
.cosmic-card { background: var(--glass-bg); backdrop-filter: var(--glass-blur); border: 1px solid var(--glass-border); border-radius: 12px; }
.btn-close-cosmic { background: none; border: none; color: rgba(255, 255, 255, 0.6); position: absolute; right: 15px; top: 15px; cursor: pointer; }

/* Expert Modal Styles */
.expert-modal {
    padding: 15px;
    background: linear-gradient(135deg, #0a0f1c, #1a1f2e);
    border-radius: 8px;
    border-left: 4px solid var(--cosmic-primary);
}

.research-paper {
    background: rgba(10, 15, 28, 0.8);
    padding: 15px;
    border-radius: 6px;
    font-family: 'Courier New', monospace;
    font-size: 0.85rem;
    border-left: 3px solid var(--cosmic-purple);
    margin-bottom: 20px;
}

.research-paper h6 {
    color: var(--cosmic-info);
    margin-bottom: 10px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    padding-bottom: 5px;
}

/* Scientific Visualization Styles */
.spectral-gradient {
    background: linear-gradient(90deg, 
        #1a237e 0%, 
        #283593 20%, 
        #3949ab 40%, 
        #5c6bc0 60%, 
        #7986cb 80%, 
        #9fa8da 100%
    );
    padding: 10px;
    border-radius: 6px;
}

.eco-impact-layer {
    background: linear-gradient(90deg, 
        #1b5e20 0%, 
        #388e3c 20%, 
        #4caf50 40%, 
        #81c784 60%, 
        #a5d6a7 80%, 
        #c8e6c9 100%
    );
}

/* Advanced Chart Styles */
.research-chart {
    background: rgba(10, 15, 28, 0.9);
    border: 1px solid var(--glass-border);
    border-radius: 8px;
    padding: 15px;
    margin: 15px 0;
}

/* Chatbot */
.chatbot-container { position: fixed; bottom: 15px; right: 15px; z-index: 1000; width: 320px; }
.chat-messages { height: 200px; overflow-y: auto; padding: 15px; background: rgba(255, 255, 255, 0.02); font-size: 0.85rem; }
.cosmic-message { margin-bottom: 12px; display: flex; gap: 10px; }
.message-avatar { width: 28px; height: 28px; border-radius: 50%; background: linear-gradient(135deg, var(--cosmic-primary), var(--cosmic-secondary)); display: flex; align-items: center; justify-content: center; font-size: 0.8rem; }
.message-content { background: rgba(255, 255, 255, 0.1); padding: 10px 14px; border-radius: 16px; max-width: 85%; }
.cosmic-input-group { background: rgba(255, 255, 255, 0.05); border-top: 1px solid var(--glass-border); padding: 10px; display: flex; gap: 8px; }
.cosmic-input { background: rgba(255, 255, 255, 0.08); border: 1px solid var(--glass-border); color: white; border-radius: 8px; flex-grow: 1; padding: 8px 12px !important; font-size: 0.85rem; }
#send-message { padding: 0 15px !important; }

/* Collapsible Panels */
.panel-body { 
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
    overflow: hidden; 
    max-height: 1000px; 
    opacity: 1; 
}
.panel-collapsed .panel-body { 
    max-height: 0; 
    opacity: 0; 
    padding: 0 !important; 
    margin: 0 !important; 
    overflow: hidden;
}
.collapse-icon { 
    transition: transform 0.3s ease; 
    color: rgba(255, 255, 255, 0.6); 
    font-size: 0.7rem; 
}
.panel-collapsed .collapse-icon { 
    transform: rotate(180deg); 
}

/* Map & Leaflet */
.cosmic-map { height: calc(100vh - 55px) !important; width: 100% !important; position: fixed; top: 55px; left: 0; z-index: 1; }
.leaflet-container { background: linear-gradient(135deg, #1e3a8a, #0f172a); font-family: 'Inter', sans-serif; }
.leaflet-bottom.leaflet-right { bottom: 0 !important; right: 0 !important; margin: 0 !important; z-index: 1000 !important; }
.leaflet-control-attribution { background: rgba(15, 23, 42, 0.8) !important; color: rgba(255, 255, 255, 0.6) !important; font-size: 0.65rem; }
.leaflet-control-attribution a { color: #60a5fa !important; }
.leaflet-top.leaflet-left { left: 250px !important; top: 15px !important; z-index: 1000; }
.leaflet-control-zoom a { background: rgba(15, 23, 42, 0.9) !important; border: 1px solid rgba(255, 255, 255, 0.2) !important; color: white !important; border-radius: 6px !important; width: 30px !important; height: 30px !important; line-height: 30px !important; }
.leaflet-popup-content-wrapper, .leaflet-popup-tip { background: rgba(15, 23, 42, 0.95) !important; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); color: white !important; }
.leaflet-popup-content h6 { color: #60a5fa; font-size: 0.9rem; margin-bottom: 5px; }
.leaflet-popup-content p { color: rgba(255, 255, 255, 0.9); margin: 0; font-size: 0.8rem; }
.leaflet-draw { display: none !important; }

/* Real data indicator */
.real-data-badge {
    background: linear-gradient(135deg, var(--cosmic-success), #059669);
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 0.8rem;
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 15px;
    border: 1px solid rgba(16, 185, 129, 0.3);
}

.real-data-badge i {
    font-size: 1rem;
}

/* Dataset source info */
.dataset-source {
    font-size: 0.7rem;
    color: rgba(255, 255, 255, 0.6);
    margin-top: 5px;
}

/* Loading states */
.loading-dataset {
    display: inline-block;
    width: 12px;
    height: 12px;
    border: 2px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    border-top-color: #fff;
    animation: spin 1s ease-in-out infinite;
    margin-right: 5px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* VIIRS heatmap legend */
.viirs-legend {
    background: rgba(0, 0, 0, 0.7);
    padding: 10px;
    border-radius: 4px;
    color: white;
    font-size: 0.8rem;
}

.legend-gradient {
    height: 10px;
    width: 100%;
    background: linear-gradient(90deg, blue, cyan, lime, yellow, red);
    margin: 5px 0;
    border-radius: 2px;
}

/* Fix for scientific mode tools */
#scientificTools .btn {
    font-size: 0.75rem;
    padding: 8px 5px !important;
    margin-bottom: 5px;
}

/* Responsive improvements */
@media (max-width: 768px) {
    .control-panel {
        width: 95%;
        left: 2.5%;
        top: 60px;
    }
    
    .data-layers-panel {
        width: 95%;
        right: 2.5%;
        top: 60px;
    }
    
    .chatbot-container {
        width: 95%;
        right: 2.5%;
        bottom: 10px;
    }

    .leaflet-top.leaflet-left {
        left: 220px !important;
    }
}

@media (max-width: 576px) {
    .control-panel {
        width: 90%;
        left: 5%;
    }
    
    .data-layers-panel {
        width: 90%;
        right: 5%;
    }
    
    .chatbot-container {
        width: 90%;
        right: 5%;
    }
    
    .btn {
        padding: 8px 10px !important;
        font-size: 0.75rem;
    }
}

/* LANDING PAGE STYLES (for index.html) */
.hero-title {
    font-weight: 800;
    background: linear-gradient(to right, #fff, #a5f3fc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 30px rgba(165, 243, 252, 0.3);
}

.mode-card {
    background: rgba(16, 24, 45, 0.6);
    border: 1px solid rgba(0, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    cursor: pointer;
    height: 100%;
    overflow: hidden;
    position: relative;
}

.mode-card:hover {
    transform: translateY(-8px) scale(1.02);
    border-color: #00d2ff;
    box-shadow: 0 10px 40px rgba(0, 210, 255, 0.2);
}

.mode-icon {
    font-size: 3.5rem;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 15px rgba(0, 210, 255, 0.4));
}

.animate-up {
    animation: fadeInUp 1s ease-out;
}

@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Ensure Loading Screen Transition works */
.loading-screen {
    opacity: 1;
    transition: opacity 0.5s ease-out;
}