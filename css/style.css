/* css/style.css - FINAL FIXED VERSION */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

:root {
    /* Cosmic Color Palette */
    --cosmic-dark: #0f172a;
    --cosmic-darker: #0a0f1c;
    --cosmic-primary: #60a5fa;
    --cosmic-secondary: #a78bfa;
    --cosmic-accent: #f59e0b;
    --cosmic-success: #10b981;
    --cosmic-danger: #ef4444;
    --cosmic-warning: #f59e0b;
    --cosmic-info: #06b6d4;
    
    /* Glass Morphism Variables */
    --glass-bg: rgba(255, 255, 255, 0.08);
    --glass-border: rgba(255, 255, 255, 0.12);
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    --glass-blur: blur(20px);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, var(--cosmic-darker) 0%, var(--cosmic-dark) 100%);
    min-height: 100vh;
    color: white;
    overflow-x: hidden;
    font-size: 0.9rem;
}

/* Animated Cosmic Background */
.stars, .twinkling, .clouds {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    width: 100%; height: 100%; display: block; z-index: -3;
}
.stars { background: #000 url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="0.5" fill="white"/><circle cx="80" cy="40" r="0.3" fill="white"/><circle cx="40" cy="80" r="0.7" fill="white"/><circle cx="60" cy="60" r="0.4" fill="white"/><circle cx="10" cy="90" r="0.6" fill="white"/></svg>') repeat top center; }
.twinkling { background: transparent url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="30" cy="30" r="0.8" fill="white" opacity="0.5"/><circle cx="70" cy="20" r="0.5" fill="white" opacity="0.3"/><circle cx="20" cy="70" r="1" fill="white" opacity="0.7"/></svg>') repeat top center; animation: move-twink-back 200s linear infinite; }
.clouds { background: transparent url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M10,50 Q30,30 50,50 T90,50" stroke="rgba(255,255,255,0.1)" fill="none" stroke-width="2"/></svg>') repeat top center; opacity: 0.3; animation: move-clouds-back 150s linear infinite; }
@keyframes move-twink-back { from { background-position: 0 0; } to { background-position: -10000px 5000px; } }
@keyframes move-clouds-back { from { background-position: 0 0; } to { background-position: 10000px 0; } }

/* Logo & Loading */
.navbar-logo { height: 28px; width: auto; filter: drop-shadow(0 0 8px rgba(96, 165, 250, 0.6)); transition: all 0.3s ease; }
.navbar-logo:hover { transform: scale(1.05); filter: drop-shadow(0 0 12px rgba(96, 165, 250, 0.8)); }
.loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.95); z-index: 9999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
.loading-content { background: var(--glass-bg); padding: 40px; border-radius: 24px; backdrop-filter: var(--glass-blur); border: 1px solid var(--glass-border); box-shadow: var(--glass-shadow); max-width: 500px; width: 90%; }
.loading-logo { max-width: 120px; height: auto; animation: float 6s ease-in-out infinite; }
@keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }

/* Navbar */
.cosmic-navbar { background: var(--glass-bg) !important; backdrop-filter: var(--glass-blur); border-bottom: 1px solid var(--glass-border); padding: 8px 0; }
.gradient-text { background: linear-gradient(135deg, var(--cosmic-primary), var(--cosmic-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 600; }
.mode-badge { font-size: 0.65em; padding: 3px 6px; border-radius: 12px; font-weight: 500; }
.citizen-mode-active .mode-badge { background: linear-gradient(135deg, var(--cosmic-success), #059669); }
.scientific-mode-active .mode-badge { background: linear-gradient(135deg, var(--cosmic-warning), #d97706); }
.btn-outline-cosmic { border: 1px solid var(--glass-border); color: rgba(255, 255, 255, 0.8); background: rgba(255, 255, 255, 0.05); border-radius: 8px !important; padding: 6px 12px !important; font-size: 0.8rem; }
.btn-outline-cosmic:hover { background: rgba(255, 255, 255, 0.1); border-color: var(--cosmic-primary); color: white; }

/* Panels */
.cosmic-panel { background: var(--glass-bg); backdrop-filter: var(--glass-blur); border: 1px solid var(--glass-border); box-shadow: var(--glass-shadow); border-radius: 12px; overflow: hidden; }
.panel-header { padding: 10px 15px; border-bottom: 1px solid var(--glass-border); cursor: pointer; position: relative; }
.panel-header h6 { margin: 0; color: rgba(255, 255, 255, 0.9); font-weight: 600; font-size: 0.85rem; }
.panel-divider { height: 1px; background: linear-gradient(90deg, transparent, var(--glass-border), transparent); margin: 0 15px; }

/* Control Panel */
.control-panel { position: fixed; top: 70px; left: 15px; z-index: 1000; width: 220px; }

/* --- FIX: SPACING --- */
/* Remove manual margins on buttons so Bootstrap 'gap' works correctly */
.control-panel .btn { 
    border-radius: 8px !important; 
    padding: 8px 12px !important; 
    text-align: left; 
    width: 100%; 
    border: 1px solid var(--glass-border); 
    color: white; 
    margin-bottom: 0 !important; 
    font-size: 0.8rem;
}
.control-panel .btn:hover { transform: translateY(-1px); filter: brightness(1.1); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4) !important; }

/* Add spacing specifically between the tool groups */
#citizenTools {
    margin-bottom: 15px !important;
}

/* Mode Toolbar Styling */
.mode-toolbar {
    margin-bottom: 15px;
}

.mode-toolbar:last-child {
    margin-bottom: 0;
}

/* Button Themes - Added Success Theme */
.btn-cosmic-primary { background: linear-gradient(135deg, var(--cosmic-primary), #3b82f6) !important; box-shadow: 0 4px 12px rgba(96, 165, 250, 0.3) !important; }
.btn-cosmic-info { background: linear-gradient(135deg, var(--cosmic-info), #0891b2) !important; box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3) !important; }
.btn-cosmic-warning { background: linear-gradient(135deg, var(--cosmic-warning), #d97706) !important; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3) !important; }
.btn-cosmic-danger { background: linear-gradient(135deg, var(--cosmic-danger), #dc2626) !important; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3) !important; }
.btn-cosmic-success { background: linear-gradient(135deg, var(--cosmic-success), #059669) !important; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4) !important; }

/* Data Layers & Basemap */
.data-layers-panel { position: fixed; top: 70px; right: 15px; z-index: 1000; width: 240px; }
.layer-controls { padding: 15px; }
.cosmic-check { display: flex; align-items: center; margin-bottom: 10px; padding: 6px 0; border-radius: 6px; }
.cosmic-check:hover { background: rgba(255, 255, 255, 0.05); }
.cosmic-check .form-check-input { background-color: rgba(255, 255, 255, 0.1); border: 1px solid var(--glass-border); margin-right: 8px; width: 16px; height: 16px; }
.cosmic-check .form-check-input:checked { background-color: var(--cosmic-primary); border-color: var(--cosmic-primary); }
.cosmic-check .form-check-label { font-size: 0.8rem; }

.basemap-dropdown { position: absolute; bottom: 100%; left: 0; width: 100%; background: rgba(10, 15, 28, 0.95); backdrop-filter: var(--glass-blur); border: 1px solid var(--glass-border); border-radius: 8px; padding: 8px; display: none; z-index: 1001; }
.basemap-dropdown.show { display: block; }
.basemap-option { padding: 6px 10px; border-radius: 6px; cursor: pointer; color: rgba(255, 255, 255, 0.9); display: flex; align-items: center; font-size: 0.8rem; }
.basemap-option:hover { background: rgba(255, 255, 255, 0.2); }
.basemap-option.active { background: rgba(96, 165, 250, 0.4); color: white; }

/* Analysis Panel */
.analysis-panel { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2000; width: 90%; max-width: 550px; max-height: 75vh; display: none; }
.cosmic-card { background: var(--glass-bg); backdrop-filter: var(--glass-blur); border: 1px solid var(--glass-border); border-radius: 12px; }
.btn-close-cosmic { background: none; border: none; color: rgba(255, 255, 255, 0.6); }

/* Chatbot */
.chatbot-container { position: fixed; bottom: 15px; right: 15px; z-index: 1000; width: 320px; }
.chat-messages { height: 200px; overflow-y: auto; padding: 15px; background: rgba(255, 255, 255, 0.02); font-size: 0.85rem; }
.cosmic-message { margin-bottom: 12px; display: flex; gap: 10px; }
.message-avatar { width: 28px; height: 28px; border-radius: 50%; background: linear-gradient(135deg, var(--cosmic-primary), var(--cosmic-secondary)); display: flex; align-items: center; justify-content: center; font-size: 0.8rem; }
.message-content { background: rgba(255, 255, 255, 0.1); padding: 10px 14px; border-radius: 16px; max-width: 85%; }
.cosmic-input-group { background: rgba(255, 255, 255, 0.05); border-top: 1px solid var(--glass-border); padding: 10px; display: flex; gap: 8px; }
.cosmic-input { background: rgba(255, 255, 255, 0.08); border: 1px solid var(--glass-border); color: white; border-radius: 8px; flex-grow: 1; padding: 8px 12px !important; font-size: 0.85rem; }
#send-message { padding: 0 15px !important; }

/* Collapsible Panels */
.panel-body { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden; max-height: 1000px; opacity: 1; }
.panel-collapsed .panel-body { max-height: 0; opacity: 0; padding: 0 !important; margin: 0 !important; }
.collapse-icon { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); transition: transform 0.3s ease; color: rgba(255, 255, 255, 0.6); font-size: 0.7rem; }
.panel-collapsed .collapse-icon { transform: translateY(-50%) rotate(-90deg); }

/* Analysis Panel Overlap Fix */
#analysisPanel .panel-header .collapse-icon {
    right: 45px !important;
    border-right: 1px solid rgba(255,255,255,0.1);
    padding-right: 8px;
    height: 18px;
    display: flex;
    align-items: center;
}

/* Map & Leaflet */
.cosmic-map { height: calc(100vh - 55px) !important; width: 100% !important; position: fixed; top: 55px; left: 0; z-index: 1; }
.leaflet-container { background: linear-gradient(135deg, #1e3a8a, #0f172a); font-family: 'Inter', sans-serif; }
.leaflet-bottom.leaflet-right { bottom: 0 !important; right: 0 !important; margin: 0 !important; z-index: 1000 !important; }
.leaflet-control-attribution { background: rgba(15, 23, 42, 0.8) !important; color: rgba(255, 255, 255, 0.6) !important; font-size: 0.65rem; }
.leaflet-control-attribution a { color: #60a5fa !important; }
.leaflet-top.leaflet-left { left: 230px !important; top: 15px !important; z-index: 1000; }
.leaflet-control-zoom a { background: rgba(15, 23, 42, 0.9) !important; border: 1px solid rgba(255, 255, 255, 0.2) !important; color: white !important; border-radius: 6px !important; width: 30px !important; height: 30px !important; line-height: 30px !important; }
.leaflet-popup-content-wrapper, .leaflet-popup-tip { background: rgba(15, 23, 42, 0.95) !important; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); color: white !important; }
.leaflet-popup-content h6 { color: #60a5fa; font-size: 0.9rem; margin-bottom: 5px; }
.leaflet-popup-content p { color: rgba(255, 255, 255, 0.9); margin: 0; font-size: 0.8rem; }
.leaflet-draw { display: none !important; }
.citizen-mode-active .control-panel { width: 200px; }
.scientific-mode-active .control-panel { width: 220px; }
@media (max-width: 768px) { .leaflet-top.leaflet-left { left: 10px !important; top: 60px !important; } }

/* Routing Machine - Dark Theme */
.leaflet-routing-container {
    background-color: rgba(15, 23, 42, 0.95) !important;
    color: white !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 10px !important;
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5) !important;
    margin-right: 15px !important;
    padding: 10px !important;
    width: 280px !important;
    font-size: 0.85rem;
}
.leaflet-routing-container h2, .leaflet-routing-container h3 { color: #60a5fa !important; font-size: 1rem !important; margin-bottom: 5px; }
.leaflet-routing-geocoders input { background: rgba(255, 255, 255, 0.1) !important; border: 1px solid rgba(255, 255, 255, 0.2) !important; color: white !important; border-radius: 6px; padding: 6px 10px; font-size: 0.85rem; }
.leaflet-routing-alt tr:hover { background-color: rgba(96, 165, 250, 0.2) !important; cursor: pointer; }
.leaflet-routing-alt-time { color: #4ade80 !important; font-weight: bold; }
.leaflet-routing-container, .leaflet-bar { background-image: none !important; }
.leaflet-routing-collapse-btn { color: white !important; }

.routing-drag-handle {
    text-align: center;
    color: rgba(255,255,255,0.5);
    padding: 4px 0;
    cursor: grab;
    background: rgba(255,255,255,0.05);
    border-radius: 6px 6px 0 0;
    margin-bottom: 8px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    font-size: 0.8rem;
}
.routing-drag-handle:active { cursor: grabbing; }

/* --- LANDING PAGE STYLES --- */
.hero-title {
    font-weight: 800;
    background: linear-gradient(to right, #fff, #a5f3fc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 30px rgba(165, 243, 252, 0.3);
}

.mode-card {
    background: rgba(16, 24, 45, 0.6);
    border: 1px solid rgba(0, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    cursor: pointer;
    height: 100%;
    overflow: hidden;
    position: relative;
}

.mode-card:hover {
    transform: translateY(-8px) scale(1.02);
    border-color: #00d2ff;
    box-shadow: 0 10px 40px rgba(0, 210, 255, 0.2);
}

.mode-icon {
    font-size: 3.5rem;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 15px rgba(0, 210, 255, 0.4));
}

.animate-up {
    animation: fadeInUp 1s ease-out;
}

@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Ensure Loading Screen Transition works */
.loading-screen {
    opacity: 1;
    transition: opacity 0.5s ease-out;
}